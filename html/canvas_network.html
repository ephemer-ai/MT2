<link rel="stylesheet" href="css/canvas_network.css">

<div class="view-controls">
  <button type="button" id="network-settings-toggle" class="btn btn-light btn-sm active" data-bs-toggle="button" title="Toggle Network Settings">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
      <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
    </svg>
  </button>
  <button type="button" class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#network-export-modal" title="Export Network">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
      <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
      <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
    </svg>
  </button>
  <button id="network-fit" type="button" class="btn btn-light btn-sm" title="Center and Scale Network">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bullseye" viewBox="0 0 16 16">
      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
      <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10zm0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"/>
      <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>
      <path d="M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
    </svg>
  </button>
  <button id="network-pinned" type="button" class="btn btn-light btn-sm" data-bs-toggle="button" aria-pressed="false" autocomplete="off" title="Pin all Nodes">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
      <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.92 5.92 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
    </svg>
  </button>
</div>

<div id="network-settings-pane" class="left-pane">
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="nodes-tab" data-bs-toggle="tab" href="#network-node-settings" role="tab" aria-controls="network-node-settings" aria-selected="true">Nodes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="links-tab" data-bs-toggle="tab" href="#network-link-settings" role="tab" aria-controls="network-link-settings" aria-selected="false">Links</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="network-tab" data-bs-toggle="tab" href="#network-settings" role="tab" aria-controls="network-settings" aria-selected="false">Network</a>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane fade show active" id="network-node-settings" role="tabpanel" aria-labelledby="nodes-tab">
      <div class="accordion" id="node-accordion">
        <div class="accordion-item" style="overflow:visible">
          <div class="accordion-header p-0">
           <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#node-labels" aria-expanded="true" aria-controls="node-labels" style="color:#495057">Labels and Tooltips</button>
          </div>
          <div id="node-labels" class="collapse show" data-bs-parent="#node-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="What field should be displayed as a label for the node?">
                <div class="col-4">
                  <label for="node-label-variable">Label</label>
                </div>
                <div class="col-8">
                  <select id="node-label-variable" class="form-select form-select-sm node-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div class="form-group row mb-2 node-label-row" title="How big should node labels be?">
                <div class="col-4">
                  <label for="node-label-size">Label Size</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="node-label-size" min="6" value="16" max="72">
                </div>
              </div>
              <div class="form-group row mb-2 node-label-row" title="How should the labels be oriented relative to their nodes?">
                <div class="col-4">
                  <label for="node-label-orientation">Orientation</label>
                </div>
                <div class="col-8">
                  <select id="node-label-orientation" class="form-select form-select-sm">
                    <option selected>Right</option>
                    <option>Left</option>
                    <option>Top</option>
                    <option>Bottom</option>
                    <option>Middle</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" title="What node data should be displayed as a tooltip for the node?">
                <div class="col-4">
                  <label for="node-tooltip-variable">Tooltip</label>
                </div>
                <div class="col-8">
                  <select id="node-tooltip-variable"  class="form-select form-select-sm chosen-select" multiple title="What node data should be displayed as a tooltip for the node?">
                    <option>None</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#node-shapes" aria-expanded="false" aria-controls="node-shapes" style="color:#495057">Shapes and Sizes</button>
          </div>
          <div id="node-shapes" class="collapse" data-bs-parent="#node-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="Which variable should determine the shape of the node?">
                <div class="col-4">
                  <label for="node-symbol-variable">Shape By</label>
                </div>
                <div class="col-8">
                  <select id="node-symbol-variable" class="form-select form-select-sm node-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div id="node-symbol-table-row" class="form-group row mb-2" title="What shape should the nodes be?">
                <div class="col-4">Table</div>
                <div class="col-8">
                  <div class="btn-group btn-group-toggle btn-group-sm w-100" data-bs-toggle="buttons">
                    <label class="btn btn-light btn-sm col active" title="Show a table of symbols">
                      <input type="radio" name="network-symbol-table-visibility" id="node-symbol-table-show" autocomplete="off" checked>
                      Show
                    </label>
                    <label class="btn btn-light btn-sm col" title="Do not show a table of symbols">
                      <input type="radio" name="network-symbol-table-visibility" id="node-symbol-table-hide" autocomplete="off"> Hide
                    </label>
                  </div>
                </div>
              </div>
              <div id="node-symbol-row" class="form-group row mb-2" title="What shape should the nodes be?">
                <div class="col-4">
                  <label for="node-symbol">Shape</label>
                </div>
                <div class="col-8">
                  <select id="node-symbol" class="form-select form-select-sm">
                    <option value="symbolCircle" selected>&nbsp;&#11044; (Circle)</option>
                    <option value="symbolTriangle">&nbsp;&#9650; (Up Triangle)</option>
                    <option value="symbolTriangleDown">&nbsp;&#9660; (Down Triangle)</option>
                    <option value="symbolTriangleLeft">&nbsp;&#9664; (Left Triangle)</option>
                    <option value="symbolTriangleRight">&nbsp;&#9654; (Right Triangle)</option>
                    <option value="symbolDiamond">&nbsp;&#10731; (Vertical Diamond)</option>
                    <option value="symbolDiamondAlt">&nbsp;&#10731; (Horizontal Diamond)</option>
                    <option value="symbolSquare">&nbsp;&#9632; (Square)</option>
                    <option value="symbolDiamondSquare">&nbsp;&#9670; (Tilted Square)</option>
                    <option value="symbolPentagon">&nbsp;&#11039; (Pentagon)</option>
                    <option value="symbolHexagon">&nbsp;&#11042; (Hexagon)</option>
                    <option value="symbolHexagonAlt">&nbsp;&#11043; (Tilted Hexagon)</option>
                    <option value="symbolOctagon">&nbsp;&#11204; (Octagon)</option>
                    <option value="symbolOctagonAlt">&nbsp;&#11203; (Tilted Octagon)</option>
                    <option value="symbolCross">&nbsp;&#10010; (Addition Sign)</option>
                    <option value="symbolX">&nbsp;&#10006; (Multiplication Sign)</option>
                    <option value="symbolWye">&nbsp;&#120300; (Wye)</option>
                    <option value="symbolStar">&nbsp;&#9733; (Star)</option>
                  </select>
                </div>
              </div>
              <div class="form-group row mb-2" title="Which variable should determine the size of the node?">
                <div class="col-4">
                  <label for="node-radius-variable">Size By</label>
                </div>
                <div class="col-8">
                  <select id="node-radius-variable" class="form-select form-select-sm node-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div id="node-max-radius-row" class="form-group row mb-2" title="Should node max radius to this variable?">
                <div class="col-4">
                  <label for="node-radius-max">Max Size</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="node-radius-max" min="100" value="4500" step="1" max="5000">
                </div>
              </div>
              <div id="node-min-radius-row" class="form-group row mb-2" title="Should node min radius to this variable?">
                <div class="col-4">
                  <label for="node-radius-min">Min Size</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="node-radius-min" min="100" value="250" step="1" max="5000">
                </div>
              </div>
              <div id="node-radius-row" class="form-group row mb-2" title="How big should the nodes be?">
                <div class="col-4">
                  <label for="node-radius">Size</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="node-radius" min="100" value="250" step="1" max="5000">
                </div>
              </div>
              <div class="form-group row" title="How wide should the node border be?">
                <div class="col-4">
                  <label for="node-border-width">Border Width</label>
                </div>
                <div class="col-8">
                  <input type="number" class="form-control form-control-sm" id="node-border-width" min="0" step="0.1" value="2">
                </div>
              </div>            
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100 launch-color-options collapsed" type="button" data-bs-toggle="collapse" aria-expanded="false" style="color:#495057">Colors</button>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="network-link-settings" role="tabpanel" aria-labelledby="links-tab">
      <div class="accordion" id="link-controls-accordion">
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#link-controls-labels" aria-expanded="true" aria-controls="link-controls-labels" style="color:#495057">Labels and Tooltips</button>
          </div>
          <div id="link-controls-labels" class="collapse show" data-bs-parent="#link-controls-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="What data should be displayed when you hover over a link?">
                <div class="col-4">
                  <label for="link-tooltip-variable">Tooltip</label>
                </div>
                <div class="col-8">
                  <select id="link-tooltip-variable" class="form-select form-select-sm link-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" title="What data should be displayed when you hover over a link?">
                <div class="col-4">
                  <label for="link-label-variable">Label</label>
                </div>
                <div class="col-8">
                  <select id="link-label-variable" class="form-select form-select-sm link-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#link-controls-shapes" aria-expanded="false" aria-controls="link-controls-shapes" style="color:#495057">Shapes and Sizes</button>
          </div>
          <div id="link-controls-shapes" class="collapse" data-bs-parent="#link-controls-accordion">
            <div class="accordion-body">
              <div id="link-transparency-row" class="form-group row mb-2" title="How transparent should the links be?">
                <div class="col-4">
                  <label for="link-opacity">Transparency</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="link-opacity" min="0" max="1" value="0" step="0.01">
                </div>
              </div>
              <div class="form-group row mb-2" title="Which variable should determine the width of a link?">
                <div class="col-4">
                  <label for="link-width-variable">Width By</label>
                </div>
                <div class="col-8">
                  <select id="link-width-variable" class="form-select form-select-sm link-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div id="link-max-width-row" class="form-group row mb-2" title="Should link max widths to this variable?">
                <div class="col-4">
                  <label for="link-width-max">Max Width</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="link-width-max" min="0.3" max="30" step=".3" value="27">
                </div>
              </div>
              <div id="link-min-width-row" class="form-group row mb-2" title="Should link min widths to this variable?">
                <div class="col-4">
                  <label for="link-width-min">Min Width</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="link-width-min" min="0.3" max="30" step=".3" value="3"></div>
              </div>
              <div id="link-width-row" class="form-group row mb-2" title="How thick should the links be?">
                <div class="col-4">
                  <label for="link-width">Width</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="link-width" min="0.3" max="30" step=".3" value="3">
                </div>
              </div>
              <div class="form-group row mb-2" title="How long should links be?">
                <div class="col-4">
                  <label for="link-length">Length</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="link-length" min="0" max="200" value="50">
                </div>
              </div>
              <div class="form-group row hideForHIVTrace" title="Should the links have arrowheads?">
                <div class="col-4">
                  <label class="form-check-label" for="network-directed">Arrows</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-directed">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100 launch-color-options" type="button" data-bs-toggle="collapse" aria-expanded="false" style="color:#495057">Colors</button>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="network-settings" role="tabpanel" aria-labelledby="network-tab">
      <div class="accordion" id="network-controls-accordion">
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#network-controls-labels" aria-expanded="true" aria-controls="network-controls-labels" style="color:#495057">Display</button>
          </div>
          <div id="network-controls-labels" class="collapse show" data-bs-parent="#network-controls-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="Should MT2 Highlight a node's neighbors when you hover on it?">
                <div class="col-4">
                  <label class="form-check-label" for="network-highlight">Highlight Neighbors</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-highlight">
                  </div>
                </div>
              </div>
              <div class="form-group row" title="Should MT2 show gridlines over the network?">
                <div class="col-4">
                  <label class="form-check-label" for="network-gridlines">Gridlines</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-gridlines">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#network-controls-physics" aria-expanded="false" aria-controls="network-controls-physics" style="color:#495057">Physics</button>
          </div>
          <div id="network-controls-physics" class="collapse" data-bs-parent="#network-controls-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="How strongly are the nodes repulsed by each other?">
                <div class="col-4">
                  <label for="node-charge">Charge</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="node-charge" min="0" max="400" value="200">
                </div>
              </div>
              <div class="form-group row mb-2" title="How attractive is the mass of the graph?">
                <div class="col-4">
                  <label for="network-gravity">Gravity</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="network-gravity" min="0.025" max="1" value="0.05" step="0.025">
                </div>
              </div>
              <div class="form-group row mb-2" title="How quickly should moving nodes lose their momentum?">
                <div class="col-4">
                  <label for="network-friction">Friction</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="network-friction" min="0" max="1" value="0.4" step="0.025">
                </div>
              </div>
              <div class="form-group row mb-2" title="How strong is the link?">
                <div class="col-4">
                  <label for="network-link-strength">Link Strength</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="network-link-strength" min="0" max="1" value="0.125" step="0.025">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#polygon-controls-labels" aria-expanded="true" aria-controls="polygon-controls-labels" style="color:#495057">Polygons</button>
          </div>
          <div id="polygon-controls-labels" class="collapse" data-bs-parent="#network-controls-accordion">
            <div class="accordion-body">
              <div class="form-group row mb-2" title="What data should be displayed when you hover over a link?">
                <div class="col-4">
                  <label class="form-check-label" for="network-polygons">Polygons</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-polygons">
                  </div>
                </div>
              </div>
              <div class="form-group row mb-2 polygon-settings-row" title="What Foci should be used when creating convex hulls?">
                <div class="col-4">
                  <label for="polygon-foci">Center</label>
                </div>
                <div class="col-8">
                  <select id="polygon-foci" class="form-select form-select-sm node-variables">
                    <option>None</option>
                  </select>
                </div>
              </div>
              <div class="form-group row mb-2 polygon-settings-row" title="What amount of gather force should be used?">
                <div class="col-4">
                  <label for="polygon-gather-force">Gather</label>
                </div>
                <div class="col-8">
                  <input type="range" class="form-range" id="polygon-gather-force" min="0" max=".02" value="0" step="0.0001">
                </div>
              </div>
              <div class="form-group row mb-2 polygon-settings-row" title="Show polygons colored?">
                <div class="col-4">
                  <label class="form-check-label" for="network-polygon-colors">Color Polygons</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-polygon-colors">
                  </div>
                </div>
              </div>
              <div id="polygon-color-table-row" class="form-group row mb-2" title="Should MT2 display the table of colors?">
                <div class="col-4">
                  <label class="form-check-label" for="network-polygon-colors-table">Polygon Color Table</label>
                </div>
                <div class="col-8">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="network-polygon-colors-table">
                  </div>
                </div>
              </div>
              <div id="polygon-color-value-row" class="form-group row mb-2" title="What color should the polygons be?">
                <div class="col-4">
                  <label for="polygon-color">Polygons</label>
                </div>
                <div class="col-8">
                  <input type="color" id="polygon-color" class="form-control form-control-sm" value="#1f77b4">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header p-0">
            <button class="bg-transparent border-0 w-100 launch-color-options collapsed" type="button" data-bs-toggle="collapse" aria-expanded="false" style="color:#495057">Colors</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<canvas id="canvas-network"></canvas>

<script src="js/canvas_network.js"></script>